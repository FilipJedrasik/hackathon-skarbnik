(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49a003ac"],{2909:function(e,t,s){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){return n(e)||a(e)||r()}s.d(t,"a",function(){return i})},4864:function(e,t,s){"use strict";var n=s("e5dd"),a=s.n(n);a.a},7514:function(e,t,s){"use strict";var n=s("5ca1"),a=s("0a49")(5),r="find",i=!0;r in[]&&Array(1)[r](function(){i=!1}),n(n.P+n.F*i,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(r)},e5dd:function(e,t,s){},f40d:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{xs12:""}},[s("util-modal",{attrs:{type:e.response.type,content:null!==e.response.content?e.response.content:void 0,header:null!==e.response.header?e.response.header:void 0,ok:null!==e.response.ok?e.response.ok:void 0,cancel:null!==e.response.cancel?e.response.cancel:void 0},on:{ok:e.asDeleteClass,cancel:function(t){e.response.modal=!1}},model:{value:e.response.modal,callback:function(t){e.$set(e.response,"modal",t)},expression:"response.modal"}}),s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",[e._v("Klasy")]),s("v-spacer"),s("br"),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.classes.length,expression:"classes.length"}],staticClass:"mb-2",attrs:{color:"primary",disabled:e.loading,dark:!e.loading},on:{click:e.showAddModal}},[e._v(e._s(e.$vuetify.breakpoint.xsOnly?"+":"Dodaj nową klasę"))]),s("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),s("v-form",{ref:"classform",attrs:{"lazy-validation":""},on:{submit:function(t){-1===e.editedIndex?e.add():e.edit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{"prepend-icon":"event_note",rules:e.classnameRulesUnique,label:"Nazwa klasy",required:""},nativeOn:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.dialog=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;(e.valid||JSON.stringify(e.theClass)!==JSON.stringify(e.beforeEdit))&&(-1===e.editedIndex?e.add():e.edit())}]},model:{value:e.theClass.name,callback:function(t){e.$set(e.theClass,"name",t)},expression:"theClass.name"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:e.freeTeachers,"item-text":"name","item-value":"id_field","menu-props":"auto",label:"Wychowawca","hide-details":"","prepend-icon":"school","single-line":"",rules:e.pickedUserObjRule},model:{value:e.theClass.user.id_field,callback:function(t){e.$set(e.theClass.user,"id_field",t)},expression:"theClass.user.id_field"}})],1)],1),s("div",{staticStyle:{"text-align":"right"}},[s("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),s("v-btn",{attrs:{color:"primary",disabled:e.processing||!e.valid||JSON.stringify(e.theClass)===JSON.stringify(e.beforeEdit)},nativeOn:{click:function(t){-1===e.editedIndex?e.add():e.edit()}}},[e._v(e._s(e.submitTitle))])],1)],1)],1)],1)],1)],1),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.loading?[]:e.classes,loading:e.loading,"item-key":"name"},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.name))]),s("td",[e._v(e._s(t.item.user.name))]),s("td",{staticClass:"justify-end layout px-3"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(s){e.editItem(t.item)}}},[e._v("\n                    edit\n                ")]),s("v-icon",{attrs:{color:"red"},on:{click:function(s){e.deleteItem(t.item)}}},[e._v("\n                    delete\n                ")])],1)]}}])},[e.loading?s("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):e._e(),s("template",{slot:"no-data"},[s("div",{staticStyle:{"text-align":"center",padding:"15px 0"}},[e.loading?s("v-progress-circular",{attrs:{size:70,color:"primary",indeterminate:""}}):s("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("Utwórz nową klasę")])],1)])],2)],1)},a=[],r=(s("20d6"),s("7514"),s("96cf"),s("1da1")),i=(s("7f7f"),s("2909")),o=s("e8dc"),l={name:"",user:{name:"",id_field:null}},c={data:function(){return{loading:!1,dialog:!1,valid:!1,beforeEdit:{},response:{type:"error",modal:!1,content:null,ok:null,cancel:null},theClass:JSON.parse(JSON.stringify(l)),deletingClass:{theClass:{},index:null},editedIndex:-1}},computed:{formTitle:function(){return-1===this.editedIndex?"Dodawanie klasy":"Edytowanie klasy"},submitTitle:function(){return-1===this.editedIndex?"Dodaj":"Zapisz"},classes:function(){return this.$store.getters["classes/getClasses"]},freeTeachers:function(){return-1===this.editedIndex?this.$store.getters["classes/getFreeTeachers"]:Object(i["a"])(this.$store.getters["classes/getFreeTeachers"]).concat([this.theClass.user])},classnameRulesUnique:function(){var e=this;return Object(i["a"])(this.classnameRules).concat([function(t){return null!=t&&Array.isArray(e.classes)&&0==e.classes.filter(function(s){return-1!=e.editedIndex?e.beforeEdit.name!==s.name&&s.name==t.trim():s.name==t.trim()}).length||"Podana klasa już istnieje"}])},headers:function(){return[{text:"Nazwa klasy",value:"name"},{text:"Wychowawca",value:"user.name"},{text:"Akcje",value:"name",align:"right",sortable:!1}]}},methods:{add:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.classform.validate()){e.next=20;break}return e.prev=1,this.asyncProcess(!0),this.theClass.user.name=this.freeTeachers.find(function(e){return e.id_field===t.theClass.user.id_field}).name,e.next=6,this.$store.dispatch("classes/addClass",this.theClass);case 6:this.dialog=!1,this.theClass=JSON.parse(JSON.stringify(l)),this.asyncProcess(!1),this.response.content="Udało się dodać nową klasę",this.response.type="success",this.response.modal=!0,e.next=20;break;case 14:e.prev=14,e.t0=e["catch"](1),this.asyncProcess(!1),this.response.content=e.t0,this.response.type="error",this.response.modal=!0;case 20:case"end":return e.stop()}},e,this,[[1,14]])}));return function(){return e.apply(this,arguments)}}(),edit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.classform.validate()){e.next=20;break}return e.prev=1,this.asyncProcess(!0),this.theClass.user.name=this.freeTeachers.find(function(e){return e.id_field===t.theClass.user.id_field}).name,e.next=6,this.$store.dispatch("classes/updateClass",this.theClass);case 6:this.dialog=!1,this.theClass=JSON.parse(JSON.stringify(l)),this.asyncProcess(!1),this.response.content="Udało się zaaktualizować klasę",this.response.type="success",this.response.modal=!0,e.next=20;break;case 14:e.prev=14,e.t0=e["catch"](1),this.asyncProcess(!1),this.response.content=e.t0,this.response.type="error",this.response.modal=!0;case 20:case"end":return e.stop()}},e,this,[[1,14]])}));return function(){return e.apply(this,arguments)}}(),editItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.editedIndex=this.classes.findIndex(function(e){return e.id_field===t.id_field}),this.beforeEdit=JSON.parse(JSON.stringify(t)),this.theClass=JSON.parse(JSON.stringify(t)),this.$store.getters["classes/loadedFreeTeachers"]){e.next=8;break}return this.asyncProcess(!0),e.next=7,this.$store.dispatch("classes/getFreeTeachers");case 7:this.asyncProcess(!1);case 8:this.dialog=!0;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteItem:function(e){this.response.header="Uwaga",this.response.content="Czy na pewno chcesz usunąć klasę ".concat(e.name,"?"),this.response.ok="Tak",this.response.cancel="Anuluj",this.response.type="error",this.response.modal=!0,this.deletingClass.theClass=e,this.deletingClass.index=this.classes.findIndex(function(t){return t.id_field===e.id_field})},asDeleteClass:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.asyncProcess(!0),e.next=4,this.$store.dispatch("classes/deleteClass",{id:this.deletingClass.theClass.id_field,teacher:this.deletingClass.theClass.user});case 4:this.response.modal=!1,this.deletingClass={theClass:{},index:null},this.asyncProcess(!1),e.next=17;break;case 9:e.prev=9,e.t0=e["catch"](0),this.asyncProcess(!1),this.response.content=e.t0,this.response.type="error",this.response.modal=!0,this.response.ok=null,this.response.cancel=null;case 17:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),showAddModal:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.editedIndex=-1,this.theClass={name:"",user:{name:"",id_field:null}},this.$refs.classform.resetValidation(),!1!==this.$store.getters["classes/loadedFreeTeachers"]){e.next=8;break}return this.$emit("async",!0),e.next=7,this.$store.dispatch("classes/getFreeTeachers");case 7:this.$emit("async",!1);case 8:this.dialog=!0;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},components:{UtilModal:o["a"]},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("classes/getClasses");case 3:this.loading=!1;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},d=c,u=(s("4864"),s("2877")),h=s("6544"),f=s.n(h),p=s("8336"),m=s("b0af"),v=s("99d9"),g=s("12b2"),y=s("a523"),b=s("8fea"),x=s("169a"),k=s("0e8f"),C=s("4bd4"),w=s("132d"),_=s("490a"),O=s("8e36"),T=s("b56d"),j=s("9910"),S=s("2677"),$=s("71d9"),V=s("2a7f"),I=Object(u["a"])(d,n,a,!1,null,"71c95742",null);I.options.__file="ClassesAdminView.vue";t["default"]=I.exports;f()(I,{VBtn:p["a"],VCard:m["a"],VCardText:v["a"],VCardTitle:g["a"],VContainer:y["a"],VDataTable:b["a"],VDialog:x["a"],VFlex:k["a"],VForm:C["a"],VIcon:w["a"],VProgressCircular:_["a"],VProgressLinear:O["a"],VSelect:T["a"],VSpacer:j["a"],VTextField:S["a"],VToolbar:$["a"],VToolbarTitle:V["b"]})}}]);
//# sourceMappingURL=chunk-49a003ac.2b0d5810.js.map