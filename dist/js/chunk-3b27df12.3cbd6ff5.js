(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b27df12"],{"94d0":function(e,t,a){"use strict";var n=a("a23a"),s=a.n(n);s.a},a23a:function(e,t,a){},de53:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{attrs:{xs12:""}},[a("util-modal",{attrs:{type:e.response.type,content:null!==e.response.content?e.response.content:void 0},model:{value:e.response.modal,callback:function(t){e.$set(e.response,"modal",t)},expression:"response.modal"}}),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Nauczyciele")]),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.teachers.length,expression:"teachers.length"}],staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.showAddModal}},[e._v("Dodaj nauczyciela")]),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-form",{ref:"teachers",on:{submit:function(t){-1===e.editedIndex?e.add():e.edit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"teacherForm",staticStyle:{width:"100%"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.nameRules,label:"Imię i nazwisko",required:""},model:{value:e.teacher.name,callback:function(t){e.$set(e.teacher,"name",t)},expression:"teacher.name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Adres email",required:""},model:{value:e.teacher.email,callback:function(t){e.$set(e.teacher,"email",t)},expression:"teacher.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.loginRules,label:"Login",required:""},model:{value:e.teacher.login,callback:function(t){e.$set(e.teacher,"login",t)},expression:"teacher.login"}})],1),-1===e.editedIndex?a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.passwordRules,label:"Hasło",type:"password",required:""},model:{value:e.teacher.password,callback:function(t){e.$set(e.teacher,"password",t)},expression:"teacher.password"}})],1):e._e()],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-btn",{attrs:{color:"primary",disabled:!e.valid},nativeOn:{click:function(t){-1===e.editedIndex?e.add():e.edit()}}},[e._v(e._s(e.submitTitle))])],1)],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.teachers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.email))]),a("td",[e._v(e._s(t.item.login))]),a("td",[e._v(e._s(t.item.password))]),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(a){e.editItem(t.item,t.index)}}},[e._v("\n                    edit\n                ")]),a("v-icon",{attrs:{color:"red"},on:{click:function(a){e.deleteItem(t.item,t.index)}}},[e._v("\n                    delete\n                ")])],1)]}}])},[a("template",{slot:"no-data"},[a("div",{staticStyle:{"text-align":"center",padding:"15px 0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("Utwórz konto nauczyciela")])],1)])],2)],1)},s=[],i=(a("f751"),a("96cf"),a("1da1")),r=(a("28a5"),a("e8dc")),o={data:function(){return{dialog:!1,valid:!1,headers:[{text:"Imię i nazwisko",value:"name"},{text:"Email",value:"email"},{text:"Login",value:"login"},{text:"Hasło",value:"password"},{text:"Akcje",value:"name",sortable:!1}],beforeEdit:{},response:{type:"error",modal:!1,content:null},teacher:{email:"",name:"",password:"",role:1,username:"",login:""},nameRules:[function(e){return!!e||"Imię i nazwisko jest wymagane"},function(e){return e&&e.length>=5||"Login musi mieć conajmniej 5 znaków"},function(e){return 2===e.split(" ").length||"Błędna forma"}],loginRules:[function(e){return!!e||"Login jest wymagany"},function(e){return e&&e.length>=5||"Login musi mieć conajmniej 5 znaków"}],passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e&&e.length>=5||"Hasło musi mieć conajmniej 8 znaków"}],emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail musi być poprawny"}],editedIndex:-1}},computed:{formTitle:function(){return-1===this.editedIndex?"Dodawanie nauczyciela":"Edytowanie nauczyciela"},submitTitle:function(){return-1===this.editedIndex?"Dodaj":"Zapisz"},teachers:function(){return this.$store.getters["teachers/getTeachers"]}},methods:{add:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.teacherForm.validate())try{this.teacher.username=this.teacher.login,console.log(this.teacher),this.$store.dispatch("teachers/addTeacher",this.teacher),this.dialog=!1,this.teacher={email:"",name:"",password:"",role:1,username:"",login:""},this.response.content="Udało się dodać nauczyciela",this.response.type="success",this.response.modal=!0}catch(t){this.response.content=t,this.response.type="error",this.response.modal=!0}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),edit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.teacherForm.validate())try{delete this.teacher.password,this.$store.dispatch("teachers/updateTeacher",{teacher:this.teacher,pos:this.editedIndex}),this.dialog=!1,this.teacher={email:"",name:"",password:"",role:1,username:""},this.response.content="Udało się zaaktualizować nauczyciela",this.response.type="success",this.response.modal=!0}catch(t){this.response.content=t,this.response.type="error",this.response.modal=!0}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),editItem:function(e,t){this.editedIndex=t,this.beforeEdit=Object.assign({},e),this.teacher=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){if(confirm("Czy na pewno chcesz usunąć tego nauczyciela?"))try{this.$store.dispatch("teachers/deleteTeacher",{id:e.id,pos:t}),this.teachers.splice(t,1)}catch(a){this.response.content=a,this.response.type="error",this.response.modal=!0}},showAddModal:function(){this.editedIndex=-1,this.teacher={email:"",name:"",password:"",role:1,username:"",login:""},this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1},300)}},components:{UtilModal:r["a"]},watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("teachers/getTeachers");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},c=o,l=(a("94d0"),a("2877")),d=a("6544"),u=a.n(d),h=a("8336"),m=a("b0af"),p=a("99d9"),f=a("12b2"),v=a("a523"),g=a("8fea"),w=a("169a"),x=a("0e8f"),b=a("4bd4"),y=a("132d"),k=a("9910"),_=a("2677"),j=a("71d9"),z=a("2a7f"),I=Object(l["a"])(c,n,s,!1,null,"7f4f3f22",null);I.options.__file="TeachersAdminView.vue";t["default"]=I.exports;u()(I,{VBtn:h["a"],VCard:m["a"],VCardText:p["a"],VCardTitle:f["a"],VContainer:v["a"],VDataTable:g["a"],VDialog:w["a"],VFlex:x["a"],VForm:b["a"],VIcon:y["a"],VSpacer:k["a"],VTextField:_["a"],VToolbar:j["a"],VToolbarTitle:z["a"]})}}]);
//# sourceMappingURL=chunk-3b27df12.3cbd6ff5.js.map