(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88795a60"],{1160:function(e,t,a){"use strict";var s=a("a882"),n=a.n(s);n.a},a882:function(e,t,a){},f40d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{attrs:{xs12:""}},[a("util-modal",{attrs:{type:e.response.type,content:null!==e.response.content?e.response.content:void 0},model:{value:e.response.modal,callback:function(t){e.$set(e.response,"modal",t)},expression:"response.modal"}}),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Klasy")]),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.classes.length,expression:"classes.length"}],staticClass:"mb-2",attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.showAddModal(t)}}},[e._v("Dodaj klase")]),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-form",{ref:"classes",on:{submit:function(t){-1===e.editedIndex?e.add():e.edit()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"classesForm",staticStyle:{width:"100%"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.classnameRules,label:"Nazwa klasy",required:""},model:{value:e.one_class.name,callback:function(t){e.$set(e.one_class,"name",t)},expression:"one_class.name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.freeTeachers,"menu-props":{maxHeight:"400"},label:"Wychowawca",hint:"Wybierz wychowawce dla klasy","persistent-hint":"","item-text":"name","item-value":"id"},model:{value:e.one_class.supervisor,callback:function(t){e.$set(e.one_class,"supervisor",t)},expression:"one_class.supervisor"}})],1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-btn",{attrs:{color:"primary",disabled:!e.valid},nativeOn:{click:function(t){-1===e.editedIndex?e.add():e.edit()}}},[e._v(e._s(e.submitTitle))])],1)],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.classes},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.supervisor))]),a("td",{staticClass:"layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"blue"},on:{click:function(a){e.editItem(t.item,t.index)}}},[e._v("\n                    edit\n                ")]),a("v-icon",{attrs:{color:"red"},on:{click:function(a){e.deleteItem(t.item,t.index)}}},[e._v("\n                    delete\n                ")])],1)]}}])},[a("template",{slot:"no-data"},[a("div",{staticStyle:{"text-align":"center",padding:"15px 0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("Utwórz klase")])],1)])],2)],1)},n=[],r=(a("f751"),a("96cf"),a("1da1")),i=(a("28a5"),a("e8dc")),o={data:function(){return{dialog:!1,valid:!1,headers:[{text:"Klasa",value:"class_name"},{text:"Wychowawca",value:"supervisor"},{text:"Akcje",value:"name",sortable:!1}],classnameRules:[function(e){return e&&e.length>=3||"Za krótka nazwa klasy"},function(e){return e&&/\d[a-zA-Z]+\d$/.test(e)||"Błędna nazwa klasy"}],teachers:[{value:4,text:"Darek Nowak",login:"daro123",password:"abcabcabc",email:"abc@op.pl"}],beforeEdit:{},response:{type:"error",modal:!1,content:null},one_class:{name:"",supervisor:-1},nameRules:[function(e){return!!e||"Imię i nazwisko jest wymagane"},function(e){return e&&e.length>=5||"Login musi mieć conajmniej 5 znaków"},function(e){return 2===e.split(" ").length||"Błędna forma"}],loginRules:[function(e){return!!e||"Login jest wymagany"},function(e){return e&&e.length>=5||"Login musi mieć conajmniej 5 znaków"}],passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e&&e.length>=5||"Hasło musi mieć conajmniej 8 znaków"}],emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail musi być poprawny"}],editedIndex:-1}},computed:{formTitle:function(){return-1===this.editedIndex?"Dodawanie nauczyciela":"Edytowanie nauczyciela"},submitTitle:function(){return-1===this.editedIndex?"Dodaj":"Zapisz"},classes:function(){return this.$store.getters["classes/getClasses"]},freeTeachers:function(){return this.$store.getters["classes/getFreeTeachers"]}},methods:{add:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.teacherForm.validate())try{this.$store.dispatch("parents/addTeacher",this.teacher),this.teachers.push(this.teacher),this.dialog=!1,this.teacher={name:"",login:"",password:"",email:""}}catch(t){this.response.content=t,this.response.type="error",this.response.modal=!0}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),edit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.teacherForm.validate())try{this.$store.dispatch("parents/updateTeacher",this.teacher),this.teachers[this.editedIndex]=this.teacher,this.dialog=!1,this.teacher={name:"",login:"",password:"",email:""},this.response.content="Udało się zaaktualizować nauczyciela",this.response.type="success",this.response.modal=!0}catch(t){this.response.content=t,this.response.type="error",this.response.modal=!0}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showAddModal:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.$store.getters["classes/getFreeTeachers"]){e.next=3;break}return e.next=3,this.$store.dispatch("classes/getFreeTeachers");case 3:this.one_class={name:"",supervisor:-1},this.dialog=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),editItem:function(e,t){this.editedIndex=t,this.beforeEdit=Object.assign({},e),this.one_class=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){if(confirm("Czy na pewno chcesz usunąć tego nauczyciela?"))try{this.$store.dispatch("parents/deleteTeacher",this.teacher.id),this.teachers.splice(t,1)}catch(a){this.response.content=a,this.response.type="error",this.response.modal=!0}}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("classes/getClasses");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),components:{UtilModal:i["a"]}},c=o,l=(a("1160"),a("2877")),d=a("6544"),u=a.n(d),h=a("8336"),p=a("b0af"),m=a("99d9"),f=a("12b2"),v=a("a523"),w=a("8fea"),g=a("169a"),b=a("0e8f"),x=a("4bd4"),y=a("132d"),k=a("b56d"),_=a("9910"),j=a("2677"),z=a("71d9"),T=a("2a7f"),V=Object(l["a"])(c,s,n,!1,null,"7be1d2f4",null);V.options.__file="ClassesAdminView.vue";t["default"]=V.exports;u()(V,{VBtn:h["a"],VCard:p["a"],VCardText:m["a"],VCardTitle:f["a"],VContainer:v["a"],VDataTable:w["a"],VDialog:g["a"],VFlex:b["a"],VForm:x["a"],VIcon:y["a"],VSelect:k["a"],VSpacer:_["a"],VTextField:j["a"],VToolbar:z["a"],VToolbarTitle:T["a"]})}}]);
//# sourceMappingURL=chunk-88795a60.fe80c51f.js.map